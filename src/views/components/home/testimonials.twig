{#
| Variable           | Type    | Description                                           |
|--------------------|---------|-------------------------------------------------------|
| title             | string  | عنوان القسم (اختياري)                                 |
| limit             | number  | الحد الأقصى لعدد التقييمات                            |
| type              | string  | نوع التقييمات (store, product, all)                   |
| sort              | string  | ترتيب التقييمات (newest, highest, lowest)             |
| layout            | string  | شكل العرض (grid, slider)                              |
| hide_customer_info| bool    | إخفاء معلومات العملاء                                 |
#}

<section class="testimonials-section py-12 sm:py-16">
    <div class="container">
        {# رأس القسم #}
        {% if title %}
            <div class="section-header text-center mb-10">
                <h2 class="text-2xl font-bold mb-4">{{ title }}</h2>
                {% if display_all_url %}
                    <a href="{{ display_all_url }}" 
                       class="inline-flex items-center text-primary hover:underline">
                        <span>{{ trans('common.view_all') }}</span>
                        <i class="sicon-arrow-{{ is_rtl ? 'left' : 'right' }} mx-2"></i>
                    </a>
                {% endif %}
            </div>
        {% endif %}

        {# مكون التقييمات #}
        <salla-reviews 
            {{ display_all_url ? "display-all-link" : "" }}
            limit="{{ limit|default(6) }}"
            sort="{{ sort|default('newest') }}"
            type="{{ type|default('store') }}"
            {{ hide_customer_info ? 'hide-customer-info' : '' }}
            layout="{{ layout|default('slider') }}"
            class="testimonials-wrapper"
        >
            {# قالب التقييم المخصص #}
            <template slot="review-template">
                <div class="review-card bg-white rounded-lg shadow-sm p-6">
                    {# رأس التقييم #}
                    <div class="flex items-start justify-between mb-4">
                        {# معلومات العميل #}
                        <div class="flex items-center gap-3" v-if="!hideCustomerInfo">
                            <img :src="review.avatar" 
                                 :alt="review.customer_name"
                                 class="w-12 h-12 rounded-full object-cover"
                            />
                            <div>
                                <h3 class="font-bold" v-text="review.customer_name"></h3>
                                <time class="text-sm text-gray-500" v-text="review.date"></time>
                            </div>
                        </div>

                        {# التقييم #}
                        <div class="rating text-primary">
                            <template v-for="i in 5">
                                <i :class="['sicon-star', i <= review.rating ? 'fill' : '']"></i>
                            </template>
                        </div>
                    </div>

                    {# نص التقييم #}
                    <p class="text-gray-600 mb-4" v-text="review.comment"></p>

                    {# صور التقييم #}
                    <div v-if="review.images && review.images.length" 
                         class="review-images grid grid-cols-4 gap-2">
                        <a v-for="image in review.images"
                           :href="image.url"
                           class="block aspect-square rounded-md overflow-hidden">
                            <img :src="image.thumbnail" 
                                 :alt="review.customer_name"
                                 class="w-full h-full object-cover"
                            />
                        </a>
                    </div>
                </div>
            </template>
        </salla-reviews>
    </div>
</section>

{% block styles %}
<style>
/* تنسيق السلايدر */
.testimonials-wrapper {
    --swiper-theme-color: var(--color-primary);
}

/* تنسيق بطاقة التقييم */
.review-card {
    height: 100%;
    transition: transform 0.3s ease;
}

.review-card:hover {
    transform: translateY(-4px);
}

/* تنسيق النجوم */
.rating .sicon-star {
    font-size: 1.25rem;
}

.rating .sicon-star.fill {
    color: var(--color-primary);
}

/* تحسين العرض على الموبايل */
@media (max-width: 640px) {
    .review-card {
        padding: 1rem;
    }
}

/* تأثيرات حركية */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.review-card {
    animation: fadeIn 0.5s ease-out;
}
</style>
{% endblock %} 
