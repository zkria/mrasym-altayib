// المتغيرات الأساسية
:root {
    // ألوان المنتج
    --product-bg: #ffffff;
    --product-dark-bg: #1F2937;
    --product-text: #1F2937;
    --product-dark-text: #F3F4F6;
    --product-border: #E5E7EB;
    --product-dark-border: #374151;
    
    // الظلال
    --product-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    --product-dark-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    
    // المسافات
    --spacing-xs: 0.5rem;
    --spacing-sm: 0.75rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    
    // الزوايا
    --radius-sm: 0.375rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
}

// تنسيقات عامة للمنتج
.product-container {
    @apply relative;

    // معرض الصور
    .product-gallery {
        @apply relative;

        // العناصر العائمة
        .floating-elements {
            @apply absolute top-4 rtl:left-4 ltr:right-4 z-10 flex flex-col gap-2;

            // شارة العرض الترويجي
            .promotion-badge {
                @apply bg-primary text-white px-3 py-1.5 rounded-md text-sm font-medium;
                
                .dark & {
                    @apply bg-primary-d;
                }
            }

            // زر المفضلة
            .wishlist-btn {
                @apply bg-white/80 backdrop-blur-sm hover:bg-white transition-colors duration-300 w-10 h-10 rounded-full flex items-center justify-center;
                
                .dark & {
                    @apply bg-gray-800/80 hover:bg-gray-800;
                }

                &.is-in-wishlist {
                    @apply text-primary;
                    
                    .sicon-heart {
                        @apply fill-current;
                    }
                }
            }

            // شارة السعرات الحرارية
            .calories-badge {
                @apply bg-white/80 backdrop-blur-sm px-3 py-1.5 rounded-md text-sm;
                
                .dark & {
                    @apply bg-gray-800/80 text-gray-200;
                }

                .calories-value {
                    @apply font-bold text-primary;
                }
            }
        }

        // المصغرات
        .thumbnails {
            @apply grid grid-cols-5 gap-2 mt-4;

            @screen md {
                @apply grid-cols-6 gap-3;
            }

            .thumbnail-wrapper {
                @apply relative pb-[100%] overflow-hidden rounded-md;
                
                .thumbnail {
                    @apply absolute inset-0 w-full h-full object-cover transition-all duration-300 cursor-pointer;
                    
                    &:hover {
                        @apply opacity-80;
                    }

                    &.active {
                        @apply ring-2 ring-primary ring-offset-2;
                        
                        .dark & {
                            @apply ring-primary-l ring-offset-gray-800;
                        }
                    }
                }
            }
        }

        // الصور الرئيسية
        .main-images {
            @apply rounded-lg overflow-hidden;

            .slide-item {
                @apply block relative pb-[100%] bg-gray-100;
                
                .dark & {
                    @apply bg-gray-800;
                }

                .slide-image {
                    @apply absolute inset-0 w-full h-full object-cover;
                }

                &.video-slide {
                    @apply cursor-pointer;
                    
                    &::after {
                        content: '';
                        @apply absolute inset-0 bg-black/30 flex items-center justify-center;
                    }

                    &::before {
                        content: '\e925';
                        font-family: 'salla-icons';
                        @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-4xl text-white z-10;
                    }
                }
            }
        }
    }

    // تفاصيل المنتج
    .main-content {
        @apply bg-white rounded-lg p-6;
        
        .dark & {
            @apply bg-gray-800 text-gray-100;
        }

        // العلامة التجارية
        .product-brand {
            @apply bg-gray-50 p-2 rounded-md;
            
            .dark & {
                @apply bg-gray-700;
            }
        }

        // الأسعار
        .price-wrapper {
            .total-price {
                @apply text-primary dark:text-primary-l;
            }

            .before-price {
                @apply text-gray-400;
            }
        }

        // معلومات المبيعات
        .product-stats {
            .stat-item {
                @apply flex items-center;

                i {
                    @apply text-primary dark:text-primary-l;
                }
            }
        }
    }
}

// نظام التقييم والأزرار
.product-actions-rating {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    flex-wrap: wrap;

    @media (max-width: 640px) {
        gap: var(--spacing-sm);
    }

    // نظام النجوم
    .rating-stars {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);

        .stars-container {
            display: flex;
            gap: 2px;

            .star {
                width: 1rem;
                height: 1rem;
                transition: transform 0.2s ease;
                
                &:not(.filled) {
                    color: #D1D5DB;
                    
                    .dark & {
                        color: rgba(209, 213, 219, 0.5);
                    }
                }

                &.filled {
                    color: #FFB800;
                }
            }
        }

        .rating-info {
            font-size: 0.875rem;
            
            .rating-average {
                color: var(--product-text);
                font-weight: 500;
                
                .dark & {
                    color: var(--product-dark-text);
                }
            }

            .rating-count {
                color: var(--product-text);
                opacity: 0.7;
                
                .dark & {
                    color: var(--product-dark-text);
                }
            }
        }
    }

    // الأزرار
    .actions-buttons {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);

        .btn--wishlist,
        .share-button {
            background-color: var(--product-bg);
            border: 1px solid var(--product-border);
            border-radius: var(--radius);
            padding: var(--spacing-sm);
            transition: all 0.2s ease;

            .dark & {
                background-color: var(--product-dark-bg);
                border-color: var(--product-dark-border);
            }

            &:hover {
                transform: translateY(-1px);
                border-color: var(--color-primary);
                
                .dark & {
                    background-color: rgba(31, 41, 55, 0.5);
                }
            }

            &:active {
                transform: translateY(0);
            }
        }

        .btn--wishlist {
            &.is-in-wishlist {
                background-color: var(--color-primary);
                border-color: var(--color-primary);
                color: white;
            }
        }
    }
}

// تحسينات للأجهزة المحمولة
@media (max-width: 768px) {
    .product-single {
        .main-content {
            margin: var(--spacing-sm);
        }
    }

    .product-actions-rating {
        flex-direction: column;
        align-items: flex-start;

        .actions-buttons {
            width: 100%;
            justify-content: space-between;
        }
    }
}

// تحسينات للشاشات الكبيرة
@media (min-width: 1024px) {
    .product-single {
        .main-content {
            padding: var(--spacing-lg);
        }
    }

    .product-actions-rating {
        margin-bottom: var(--spacing-lg);
    }
}

// تنسيقات التبويبات
.product-tabs {
    margin-top: var(--spacing-lg);

    // شريط التبويبات
    .tabs-header {
        display: flex;
        gap: var(--spacing-sm);
        border-bottom: 1px solid var(--product-border);
        margin-bottom: var(--spacing-lg);
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;

        &::-webkit-scrollbar {
            display: none;
        }

        .dark & {
            border-color: var(--product-dark-border);
        }

        // زر التبويب
        .tab-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            color: var(--product-text);
            font-weight: 500;
            white-space: nowrap;
            position: relative;
            transition: all 0.3s ease;

            .dark & {
                color: var(--product-dark-text);
            }

            // خط نشط
            &::after {
                content: '';
                position: absolute;
                bottom: -1px;
                left: 0;
                width: 100%;
                height: 2px;
                background-color: var(--color-primary);
                transform: scaleX(0);
                transition: transform 0.3s ease;
            }

            // حالة نشطة
            &.active {
                color: var(--color-primary);

                &::after {
                    transform: scaleX(1);
                }
            }

            &:hover:not(.active) {
                color: var(--color-primary);
                opacity: 0.8;
            }
        }
    }

    // محتوى التبويبات
    .tab-content {
        display: none;
        padding: var(--spacing-md);
        background-color: var(--product-bg);
        border-radius: var(--radius);

        .dark & {
            background-color: var(--product-dark-bg);
        }

        &.active {
            display: block;
        }
    }
}

// معرض الصور والمصغرات
.product-gallery {
    position: relative;
    border-radius: var(--radius);
    overflow: hidden;

    // العناصر العائمة
    .floating-elements {
        position: absolute;
        top: var(--spacing-md);
        right: var(--spacing-md);
        z-index: 10;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm);

        // زر المفضلة العائم
        .floating-wishlist {
            background-color: var(--product-bg);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

            .dark & {
                background-color: var(--product-dark-bg);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }

            .sicon-heart {
                color: var(--product-text);
                font-size: 1.2rem;

                .dark & {
                    color: var(--product-dark-text);
                }
            }

            &.is-in-wishlist {
                background-color: var(--color-primary);

                .sicon-heart {
                    color: white;
                }
            }

            &:hover {
                transform: scale(1.1);
            }
        }

        // شارة العرض الترويجي
        .promotion-badge {
            background-color: var(--color-primary);
            color: white;
            padding: 4px var(--spacing-sm);
            border-radius: var(--radius);
            font-size: 0.875rem;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

            .dark & {
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }
        }
    }

    // الصورة الرئيسية
    .main-image {
        width: 100%;
        aspect-ratio: 1;
        object-fit: cover;
        border-radius: var(--radius);
    }

    // المصغرات
    .thumbnails {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: var(--spacing-sm);
        margin-top: var(--spacing-sm);
        padding: var(--spacing-sm) 0;
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;

        &::-webkit-scrollbar {
            display: none;
        }

        // حاوية الصورة المصغرة
        .thumbnail-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 100%; // يجعل الارتفاع مساوياً للعرض
        }

        // الصورة المصغرة
        .thumbnail {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: calc(var(--radius) / 2);
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.3s ease;

            &.active {
                opacity: 1;
                border: 2px solid var(--color-primary);
            }

            &:hover:not(.active) {
                opacity: 0.8;
            }
        }
    }
}

// تحسينات للأجهزة المحمولة
@media (max-width: 768px) {
    .product-tabs {
        .tabs-header {
            .tab-btn {
                padding: var(--spacing-sm);
                font-size: 0.875rem;
            }
        }
    }

    .product-gallery {
        .floating-elements {
            top: var(--spacing-sm);
            right: var(--spacing-sm);

            .floating-wishlist {
                width: 35px;
                height: 35px;
            }
        }

        .thumbnails {
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: calc(var(--spacing-sm) / 2);
        }
    }
}

// تحسينات للشاشات الكبيرة
@media (min-width: 1024px) {
    .product-tabs {
        .tab-content {
            padding: var(--spacing-lg);
        }
    }

    .product-gallery {
        .thumbnails {
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: var(--spacing-md);
        }
    }
}

// تنسيقات التبويبات
.product-tabs-container {
    @apply mt-8;

    // رأس التبويبات
    .tabs-header {
        @apply flex items-center gap-2 border-b border-gray-200 mb-5 overflow-x-auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
        
        &::-webkit-scrollbar {
            display: none;
        }

        .dark & {
            @apply border-gray-700;
        }

        // زر التبويب
        .tab-btn {
            @apply px-5 py-2.5 text-sm font-bold text-gray-500 relative whitespace-nowrap transition-colors duration-300;
            
            .dark & {
                @apply text-gray-400;
            }

            // خط نشط
            &::after {
                content: '';
                @apply absolute bottom-[-1px] left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left;
            }

            // حالة نشطة
            &.active {
                @apply text-primary;
                
                &::after {
                    @apply scale-x-100;
                }

                .dark & {
                    @apply text-primary-l;
                }
            }

            &:hover:not(.active) {
                @apply text-gray-800;
                
                .dark & {
                    @apply text-gray-200;
                }
            }
        }
    }

    // محتوى التبويبات
    .tab-panel {
        @apply hidden p-4 rounded-lg bg-white;
        
        .dark & {
            @apply bg-gray-800;
        }

        &.active {
            @apply block;
        }

        // وصف المنتج
        .product-description {
            @apply max-w-none text-gray-600;
            
            .dark & {
                @apply text-gray-300;
            }

            // العناوين
            h1, h2, h3, h4, h5, h6 {
                @apply font-bold text-gray-900 mb-4;
                
                .dark & {
                    @apply text-white;
                }
            }

            h1 { @apply text-3xl; }
            h2 { @apply text-2xl; }
            h3 { @apply text-xl; }
            h4 { @apply text-lg; }

            // الفقرات
            p {
                @apply mb-4 leading-relaxed;
            }

            // القوائم
            ul, ol {
                @apply mb-4 rtl:pr-5 ltr:pl-5;
            }

            li {
                @apply mb-2;
                
                &::before {
                    content: "•";
                    @apply rtl:ml-2 ltr:mr-2 text-primary;
                }
            }

            // الروابط
            a {
                @apply text-primary hover:underline;
                
                .dark & {
                    @apply text-primary-l;
                }
            }

            // الصور والوسائط
            img, video {
                @apply rounded-lg my-4 max-w-full h-auto mx-auto;
            }

            iframe {
                @apply w-full rounded-lg my-4 aspect-video;
            }

            // الاقتباسات
            blockquote {
                @apply border-r-4 border-primary p-4 my-4 bg-gray-50;
                
                .dark & {
                    @apply border-primary-l bg-gray-700;
                }
            }

            // الجداول
            table {
                @apply w-full mb-4;
                
                th, td {
                    @apply border border-gray-200 p-2;
                    
                    .dark & {
                        @apply border-gray-700;
                    }
                }

                th {
                    @apply bg-gray-50 font-bold;
                    
                    .dark & {
                        @apply bg-gray-700;
                    }
                }
            }
        }

        // التقييمات
        .reviews-container {
            @apply space-y-4;
        }

        // الأسئلة
        .questions-container {
            @apply space-y-4;
        }
    }
}

// نموذج إضافة للسلة
.product-form {
    // خيارات المنتج
    .cart-options {
        @apply space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200 mb-4;
        
        .dark & {
            @apply bg-gray-700/50 border-gray-700;
        }

        .option-title {
            @apply font-bold mb-2;
        }

        // حقول الإدخال
        .s-form-control {
            @apply bg-white border-gray-200 rounded-md;
            
            .dark & {
                @apply bg-gray-800 border-gray-600 text-gray-200;
            }

            &:focus {
                @apply ring-2 ring-primary/20 border-primary;
                
                .dark & {
                    @apply ring-primary-l/20 border-primary-l;
                }
            }
        }
    }

    // شريط الإضافة للسلة
    .sticky-product-bar {
        @apply transition-all duration-300;

        &.is-sticky {
            @apply fixed bottom-0 left-0 right-0 z-50 shadow-lg;
            animation: slideUp 0.3s ease-out;
        }

        // زر الكمية
        .sticky-product-bar__quantity {
            salla-quantity-input {
                @apply bg-gray-50 border border-gray-200 rounded-md;
                
                .dark & {
                    @apply bg-gray-700 border-gray-600;
                }
            }
        }

        // زر الإضافة للسلة
        .sticky-product-bar__btn {
            @apply bg-primary text-white hover:bg-primary-d transition-colors duration-300;
            
            .dark & {
                @apply bg-primary-l hover:bg-primary;
            }

            &:disabled {
                @apply opacity-50 cursor-not-allowed;
            }
        }
    }
}

// تحريك للأعلى
@keyframes slideUp {
    from {
        transform: translateY(100%);
    }
    to {
        transform: translateY(0);
    }
}

// تحسينات للأجهزة المحمولة
@media (max-width: 768px) {
    .product-container {
        .product-gallery {
            .thumbnails {
                @apply grid-cols-4 gap-2;
            }
        }

        .main-content {
            @apply p-4;
        }
    }

    .product-tabs-container {
        .tabs-header {
            @apply gap-1;

            .tab-btn {
                @apply px-3 py-2 text-xs;
            }
        }
    }
}

// دعم الوضع المظلم
.dark {
    .product-container {
        --product-shadow: var(--product-dark-shadow);
    }
}

// تحسينات للشاشات الكبيرة
@media (min-width: 1024px) {
    .product-container {
        .product-gallery {
            .thumbnails {
                @apply grid-cols-6;
            }
        }
    }
}

// المتغيرات الأساسية
:root {
    // ألوان المنتج
    --product-bg: #ffffff;
    --product-dark-bg: #1F2937;
    --product-text: #1F2937;
    --product-dark-text: #F3F4F6;
    --product-border: #E5E7EB;
    --product-dark-border: #374151;
    
    // الظلال
    --product-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    --product-dark-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    
    // المسافات
    --spacing-xs: 0.5rem;
    --spacing-sm: 0.75rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    
    // الزوايا
    --radius-sm: 0.375rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
}

// تنسيقات عامة للمنتج
.product-container {
    @apply relative;

    // معرض الصور
    .product-gallery {
        @apply relative;

        // العناصر العائمة
        .floating-elements {
            @apply absolute top-4 rtl:left-4 ltr:right-4 z-10 flex flex-col gap-2;

            // شارة العرض الترويجي
            .promotion-badge {
                @apply bg-primary text-white px-3 py-1.5 rounded-md text-sm font-medium;
                
                .dark & {
                    @apply bg-primary-d;
                }
            }

            // زر المفضلة
            .wishlist-btn {
                @apply bg-white/80 backdrop-blur-sm hover:bg-white transition-colors duration-300 w-10 h-10 rounded-full flex items-center justify-center;
                
                .dark & {
                    @apply bg-gray-800/80 hover:bg-gray-800;
                }

                &.is-in-wishlist {
                    @apply text-primary;
                    
                    .sicon-heart {
                        @apply fill-current;
                    }
                }
            }

            // شارة السعرات الحرارية
            .calories-badge {
                @apply bg-white/80 backdrop-blur-sm px-3 py-1.5 rounded-md text-sm;
                
                .dark & {
                    @apply bg-gray-800/80 text-gray-200;
                }

                .calories-value {
                    @apply font-bold text-primary;
                }
            }
        }

        // المصغرات
        .thumbnails {
            @apply grid grid-cols-5 gap-2 mt-4;

            @screen md {
                @apply grid-cols-6 gap-3;
            }

            .thumbnail-wrapper {
                @apply relative pb-[100%] overflow-hidden rounded-md;
                
                .thumbnail {
                    @apply absolute inset-0 w-full h-full object-cover transition-all duration-300 cursor-pointer;
                    
                    &:hover {
                        @apply opacity-80;
                    }

                    &.active {
                        @apply ring-2 ring-primary ring-offset-2;
                        
                        .dark & {
                            @apply ring-primary-l ring-offset-gray-800;
                        }
                    }
                }
            }
        }

        // الصور الرئيسية
        .main-images {
            @apply rounded-lg overflow-hidden;

            .slide-item {
                @apply block relative pb-[100%] bg-gray-100;
                
                .dark & {
                    @apply bg-gray-800;
                }

                .slide-image {
                    @apply absolute inset-0 w-full h-full object-cover;
                }

                &.video-slide {
                    @apply cursor-pointer;
                    
                    &::after {
                        content: '';
                        @apply absolute inset-0 bg-black/30 flex items-center justify-center;
                    }

                    &::before {
                        content: '\e925';
                        font-family: 'salla-icons';
                        @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-4xl text-white z-10;
                    }
                }
            }
        }
    }

    // تفاصيل المنتج
    .main-content {
        @apply bg-white rounded-lg p-6;
        
        .dark & {
            @apply bg-gray-800 text-gray-100;
        }

        // العلامة التجارية
        .product-brand {
            @apply bg-gray-50 p-2 rounded-md;
            
            .dark & {
                @apply bg-gray-700;
            }
        }

        // الأسعار
        .price-wrapper {
            .total-price {
                @apply text-primary dark:text-primary-l;
            }

            .before-price {
                @apply text-gray-400;
            }
        }

        // معلومات المبيعات
        .product-stats {
            .stat-item {
                @apply flex items-center;

                i {
                    @apply text-primary dark:text-primary-l;
                }
            }
        }
    }
}

// نظام التقييم والأزرار
.product-actions-rating {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    flex-wrap: wrap;

    @media (max-width: 640px) {
        gap: var(--spacing-sm);
    }

    // نظام النجوم
    .rating-stars {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);

        .stars-container {
            display: flex;
            gap: 2px;

            .star {
                width: 1rem;
                height: 1rem;
                transition: transform 0.2s ease;
                
                &:not(.filled) {
                    color: #D1D5DB;
                    
                    .dark & {
                        color: rgba(209, 213, 219, 0.5);
                    }
                }

                &.filled {
                    color: #FFB800;
                }
            }
        }

        .rating-info {
            font-size: 0.875rem;
            
            .rating-average {
                color: var(--product-text);
                font-weight: 500;
                
                .dark & {
                    color: var(--product-dark-text);
                }
            }

            .rating-count {
                color: var(--product-text);
                opacity: 0.7;
                
                .dark & {
                    color: var(--product-dark-text);
                }
            }
        }
    }

    // الأزرار
    .actions-buttons {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);

        .btn--wishlist,
        .share-button {
            background-color: var(--product-bg);
            border: 1px solid var(--product-border);
            border-radius: var(--radius);
            padding: var(--spacing-sm);
            transition: all 0.2s ease;

            .dark & {
                background-color: var(--product-dark-bg);
                border-color: var(--product-dark-border);
            }

            &:hover {
                transform: translateY(-1px);
                border-color: var(--color-primary);
                
                .dark & {
                    background-color: rgba(31, 41, 55, 0.5);
                }
            }

            &:active {
                transform: translateY(0);
            }
        }

        .btn--wishlist {
            &.is-in-wishlist {
                background-color: var(--color-primary);
                border-color: var(--color-primary);
                color: white;
            }
        }
    }
}

// تحسينات للأجهزة المحمولة
@media (max-width: 768px) {
    .product-single {
        .main-content {
            margin: var(--spacing-sm);
        }
    }

    .product-actions-rating {
        flex-direction: column;
        align-items: flex-start;

        .actions-buttons {
            width: 100%;
            justify-content: space-between;
        }
    }
}

// تحسينات للشاشات الكبيرة
@media (min-width: 1024px) {
    .product-single {
        .main-content {
            padding: var(--spacing-lg);
        }
    }

    .product-actions-rating {
        margin-bottom: var(--spacing-lg);
    }
}

// تنسيقات التبويبات
.product-tabs {
    margin-top: var(--spacing-lg);

    // شريط التبويبات
    .tabs-header {
        display: flex;
        gap: var(--spacing-sm);
        border-bottom: 1px solid var(--product-border);
        margin-bottom: var(--spacing-lg);
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;

        &::-webkit-scrollbar {
            display: none;
        }

        .dark & {
            border-color: var(--product-dark-border);
        }

        // زر التبويب
        .tab-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            color: var(--product-text);
            font-weight: 500;
            white-space: nowrap;
            position: relative;
            transition: all 0.3s ease;

            .dark & {
                color: var(--product-dark-text);
            }

            // خط نشط
            &::after {
                content: '';
                position: absolute;
                bottom: -1px;
                left: 0;
                width: 100%;
                height: 2px;
                background-color: var(--color-primary);
                transform: scaleX(0);
                transition: transform 0.3s ease;
            }

            // حالة نشطة
            &.active {
                color: var(--color-primary);

                &::after {
                    transform: scaleX(1);
                }
            }

            &:hover:not(.active) {
                color: var(--color-primary);
                opacity: 0.8;
            }
        }
    }

    // محتوى التبويبات
    .tab-content {
        display: none;
        padding: var(--spacing-md);
        background-color: var(--product-bg);
        border-radius: var(--radius);

        .dark & {
            background-color: var(--product-dark-bg);
        }

        &.active {
            display: block;
        }
    }
}

// معرض الصور والمصغرات
.product-gallery {
    position: relative;
    border-radius: var(--radius);
    overflow: hidden;

    // العناصر العائمة
    .floating-elements {
        position: absolute;
        top: var(--spacing-md);
        right: var(--spacing-md);
        z-index: 10;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm);

        // زر المفضلة العائم
        .floating-wishlist {
            background-color: var(--product-bg);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

            .dark & {
                background-color: var(--product-dark-bg);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }

            .sicon-heart {
                color: var(--product-text);
                font-size: 1.2rem;

                .dark & {
                    color: var(--product-dark-text);
                }
            }

            &.is-in-wishlist {
                background-color: var(--color-primary);

                .sicon-heart {
                    color: white;
                }
            }

            &:hover {
                transform: scale(1.1);
            }
        }

        // شارة العرض الترويجي
        .promotion-badge {
            background-color: var(--color-primary);
            color: white;
            padding: 4px var(--spacing-sm);
            border-radius: var(--radius);
            font-size: 0.875rem;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

            .dark & {
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }
        }
    }

    // الصورة الرئيسية
    .main-image {
        width: 100%;
        aspect-ratio: 1;
        object-fit: cover;
        border-radius: var(--radius);
    }

    // المصغرات
    .thumbnails {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: var(--spacing-sm);
        margin-top: var(--spacing-sm);
        padding: var(--spacing-sm) 0;
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;

        &::-webkit-scrollbar {
            display: none;
        }

        // حاوية الصورة المصغرة
        .thumbnail-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 100%; // يجعل الارتفاع مساوياً للعرض
        }

        // الصورة المصغرة
        .thumbnail {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: calc(var(--radius) / 2);
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.3s ease;

            &.active {
                opacity: 1;
                border: 2px solid var(--color-primary);
            }

            &:hover:not(.active) {
                opacity: 0.8;
            }
        }
    }
}

// تحسينات للأجهزة المحمولة
@media (max-width: 768px) {
    .product-tabs {
        .tabs-header {
            .tab-btn {
                padding: var(--spacing-sm);
                font-size: 0.875rem;
            }
        }
    }

    .product-gallery {
        .floating-elements {
            top: var(--spacing-sm);
            right: var(--spacing-sm);

            .floating-wishlist {
                width: 35px;
                height: 35px;
            }
        }

        .thumbnails {
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: calc(var(--spacing-sm) / 2);
        }
    }
}

// تحسينات للشاشات الكبيرة
@media (min-width: 1024px) {
    .product-tabs {
        .tab-content {
            padding: var(--spacing-lg);
        }
    }

    .product-gallery {
        .thumbnails {
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: var(--spacing-md);
        }
    }
}

// تنسيقات التبويبات
.product-tabs-container {
    @apply mt-8;

    // رأس التبويبات
    .tabs-header {
        @apply flex items-center gap-2 border-b border-gray-200 mb-5 overflow-x-auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
        
        &::-webkit-scrollbar {
            display: none;
        }

        .dark & {
            @apply border-gray-700;
        }

        // زر التبويب
        .tab-btn {
            @apply px-5 py-2.5 text-sm font-bold text-gray-500 relative whitespace-nowrap transition-colors duration-300;
            
            .dark & {
                @apply text-gray-400;
            }

            // خط نشط
            &::after {
                content: '';
                @apply absolute bottom-[-1px] left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left;
            }

            // حالة نشطة
            &.active {
                @apply text-primary;
                
                &::after {
                    @apply scale-x-100;
                }

                .dark & {
                    @apply text-primary-l;
                }
            }

            &:hover:not(.active) {
                @apply text-gray-800;
                
                .dark & {
                    @apply text-gray-200;
                }
            }
        }
    }

    // محتوى التبويبات
    .tab-panel {
        @apply hidden p-4 rounded-lg bg-white;
        
        .dark & {
            @apply bg-gray-800;
        }

        &.active {
            @apply block;
        }

        // وصف المنتج
        .product-description {
            @apply max-w-none text-base leading-relaxed;
            
            h1, h2, h3, h4, h5, h6 {
                @apply font-bold mb-4 mt-6 text-gray-900;
                
                .dark & {
                    @apply text-gray-100;
                }
            }

            h1 { @apply text-2xl; }
            h2 { @apply text-xl; }
            h3 { @apply text-lg; }

            p {
                @apply mb-4 text-gray-600;
                
                .dark & {
                    @apply text-gray-300;
                }
            }

            ul, ol {
                @apply mb-4 rtl:pr-5 ltr:pl-5 text-gray-600;
                
                .dark & {
                    @apply text-gray-300;
                }
            }

            li {
                @apply mb-2;
                
                &::before {
                    content: "•";
                    @apply rtl:ml-2 ltr:mr-2 text-primary;
                }
            }

            img {
                @apply rounded-lg my-4 max-w-full h-auto;
            }

            iframe {
                @apply w-full rounded-lg my-4;
            }
        }

        // التقييمات
        .reviews-container {
            @apply space-y-4;
        }

        // الأسئلة
        .questions-container {
            @apply space-y-4;
        }
    }
}

// نموذج إضافة للسلة
.product-form {
    // خيارات المنتج
    .cart-options {
        @apply space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200 mb-4;
        
        .dark & {
            @apply bg-gray-700/50 border-gray-700;
        }

        .option-title {
            @apply font-bold mb-2;
        }

        // حقول الإدخال
        .s-form-control {
            @apply bg-white border-gray-200 rounded-md;
            
            .dark & {
                @apply bg-gray-800 border-gray-600 text-gray-200;
            }

            &:focus {
                @apply ring-2 ring-primary/20 border-primary;
                
                .dark & {
                    @apply ring-primary-l/20 border-primary-l;
                }
            }
        }
    }

    // شريط الإضافة للسلة
    .sticky-product-bar {
        @apply transition-all duration-300;

        &.is-sticky {
            @apply fixed bottom-0 left-0 right-0 z-50 shadow-lg;
            animation: slideUp 0.3s ease-out;
        }

        // زر الكمية
        .sticky-product-bar__quantity {
            salla-quantity-input {
                @apply bg-gray-50 border border-gray-200 rounded-md;
                
                .dark & {
                    @apply bg-gray-700 border-gray-600;
                }
            }
        }

        // زر الإضافة للسلة
        .sticky-product-bar__btn {
            @apply bg-primary text-white hover:bg-primary-d transition-colors duration-300;
            
            .dark & {
                @apply bg-primary-l hover:bg-primary;
            }

            &:disabled {
                @apply opacity-50 cursor-not-allowed;
            }
        }
    }
}

// تحريك للأعلى
@keyframes slideUp {
    from {
        transform: translateY(100%);
    }
    to {
        transform: translateY(0);
    }
}

// تحسينات للأجهزة المحمولة
@media (max-width: 768px) {
    .product-container {
        .product-gallery {
            .thumbnails {
                @apply grid-cols-4 gap-2;
            }
        }

        .main-content {
            @apply p-4;
        }
    }

    .product-tabs-container {
        .tabs-header {
            @apply gap-1;

            .tab-btn {
                @apply px-3 py-2 text-xs;
            }
        }
    }
}

// دعم الوضع المظلم
.dark {
    .product-container {
        --product-shadow: var(--product-dark-shadow);
    }
}

// تحسينات للشاشات الكبيرة
@media (min-width: 1024px) {
    .product-container {
        .product-gallery {
            .thumbnails {
                @apply grid-cols-6;
            }
        }
    }
}
