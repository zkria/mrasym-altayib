  
// Wishlist Product entry
.product-entry {
  @apply h-full transition-shadow duration-300 bg-white hover:shadow-default rounded-lg justify-between flex relative;

  &--wishlist {
    @apply justify-between p-4 flex-col sm:flex-row;

    .product-entry__image {
      @apply overflow-hidden w-16 h-12 md:w-20 md:h-16 rounded-md;
    }

    salla-button{
      @apply flex;
    }
  }
}

.s-comments {
  &-page {
    @apply pt-16;
  }

  &-product {
    @apply bg-gray-100 mb-4 md:mb-14 py-4 md:py-14;

    .s-comments-container {
      @apply container;
    }
  }
}

// share list
.share-btns-list{
  @apply absolute z-10 overflow-hidden opacity-0 top-12 bg-white flex items-center flex-col shadow-huge rounded-3xl;

  a{
    @apply block p-3 hover:text-primary;
  }
}


// cart
.cart-item{
  salla-conditional-fields > section{
    @apply px-0 pt-0 last:mb-0 last:pb-0;
  }
}

// Digital Rating(SVG)---------------------------
.s-product-card-content-pie-svg-base{ 
  transition: stroke-dashoffset 1s linear;
  stroke: #E8EDF2;
  stroke-width: 2px;
  stroke-linecap: round;
  fill: none;
}

.s-product-card-content-pie-svg-bar{
  fill: none;
  stroke: var(--color-primary);
  stroke-dasharray: 100 100;
  stroke-dashoffset: 100;
}

.pie-wrapper {
  @apply w-[72px] h-[72px] absolute top-2.5 rtl:left-5 ltr:right-5 text-primary flex items-center justify-center;

  .pie-svg {
    circle {
      transition: stroke-dashoffset 1s linear;
      stroke: #E8EDF2;
      stroke-width: 2px;
      stroke-linecap: round;
      fill: none;

      &.circle_bar {
        stroke: var(--color-primary);
        stroke-dasharray: 100 100;
        stroke-dashoffset: 100;
      }
    }
  }

  span {
      display: block;
      font-size: var(--font-xsm);
      color: var(--color-text);
      text-align: center;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      line-height: 1;
      font-size: var(--font-xsm);

      b {
          font-size: var(--font-md) !important;
          margin-bottom: 3px;
          color: var(--color-primary);
      }
  }

}

/* Add to cart sticky bar */
@media (max-width: 640px) {
  .is-sticky-product-bar{
    &.product-single{
      @apply pb-28;
    }

    .sticky-product-bar{
      @apply flex flex-wrap flex-col gap-2.5 sm:gap-4 fixed z-[2] bottom-0 left-0 p-3 w-full justify-between items-center shadow-[-1px_-2px_9px_0_rgba(0,0,0,0.05)] transition duration-700 delay-500 translate-y-100 opacity-0 ease-elastic;

      &__quantity,
      salla-add-product-button{
        @apply translate-y-5 opacity-0 transition duration-700 ease-elastic w-full;
      }

      &__price,
      .form-label{
        @apply hidden;
      }

      &__quantity{
        salla-quantity-input{
          @apply w-full;
          .s-quantity-input-container{
            @apply w-full;
          }
          .s-quantity-input-input{
            @apply w-[80%]
          }
        }
        @apply m-0 delay-[900ms];
      }

      salla-add-product-button{
        @apply w-auto m-0 flex-1 delay-1000;
      }

      .hydrated &{
        &,
        &__quantity,
        salla-add-product-button{
          @apply translate-y-0 opacity-100;
        }
      }
    }
  }
}

// Tabs fix
.s-tabs-header * {
  pointer-events: auto !important;
}
.product__description {
  ul,
  li{
    list-style: inherit !important;
  }

  ul,
  ol {
    @apply px-6;
  }

  ol{
    list-style: auto !important;
  }

  a{
    @apply text-blue-700;
  }
}



// 3d Image Viewer ------------------------------
.model-viewer-wrapper {
  @apply relative mb-4 md:mb-0 w-full;
}

.switcher-3d-view {
  @apply absolute top-5 rtl:left-4 ltr:right-4;

  // .has-calories-badge &{
  //   @apply top-auto bottom-5;
  // }
}

.model-viewer {
  @apply w-full h-full;

  &__poster {
    @apply absolute inset-0 bg-contain bg-no-repeat bg-center;
  }
}

.s-toggle .s-toggle-switcher-has-text:before {
  @apply content-[attr(data-switcher-text)] font-bold text-center text-gray-400 text-xs leading-[22px];
  font-family: arial, serif;
}

.s-toggle .s-toggle-input:checked+div.s-toggle-switcher-bg-white:before {
  @apply text-gray-600 border-white bg-white;
}

// product options file upload component
.product-option-uploader{
  .s-file-upload-wrapper{
    min-height: 120px;
    .filepond--list-scroller{
      overflow-y: inherit !important;
    }
    .filepond--drop-label {
      min-height: 120px !important;
      @apply bg-white cursor-pointer border-dashed rounded-md border border-gray-200;
    }
    .product-option-uploader-placholder{
      @apply flex flex-col justify-center items-center;
      &-icon {
        @apply mb-1;
        i {
          color: #7c8082;
          @apply text-xl;
        }
      }
    }

  }
}

// centered offer modal width fix
@media (max-width: 640px) {
  .s-offer-modal-slider-centered .s-offer-modal-slider-item {
    max-width: 46% !important;
  }
}

.s-product{
    &-card{
      &-full-image salla-add-product-button {
        @apply bg-white rounded;
      }
    
      &-wishlist-added i {
        @apply text-red-500
      }
      &-fit-height.s-product-card-vertical .s-product-card-image {
        @apply flex-none sm:flex-1;
      }
    }
    
    &-options-colors-wrapper{
      @apply flex flex-wrap gap-4;
      
      .s-product-options-colors-item{
        @apply m-0 rtl:m-0 ltr:m-0 w-auto;
    }
  }
}

// Minimal card
.s-product-card-minimal .s-product-card-image{
  @apply rtl:rounded-r ltr:rounded-l;
}

.s-product-card-starting-price{
  @apply justify-start gap-2.5;
}

.s-product-card-minimal salla-button.s-product-card-wishlist-btn{
  @apply rtl:left-2.5 ltr:right-2.5 top-2.5;
}

// image zooming
.magnify-wrapper {
	.img-magnifier-glass {
	  @apply hidden sm:block;
	  position: absolute;
	  z-index: 3;
	  border-radius: 50%;
	  cursor: none;
	  /*Set the size of the magnifier glass:*/
	  width: 300px;
	  height: 300px;
	  opacity:0;
	  pointer-events:none;
	  transform: scale(0);
	  transition: transform .5s ease;
	  box-shadow: inset 0px 0px 30px #949494;
	}
	&:hover{
	  .img-magnifier-glass{
		opacity:1;
		pointer-events:initial;
		transform: scale(1);
		transition-delay: 0.3s;
	  }
	} 
}


// Horizontal card
.s-product-card-horizontal{
  .s-product-card-content{
    @apply mb-0;
  }

  @media(max-width: 480px){
    salla-button.s-product-card-wishlist-btn{
      @apply absolute bottom-2.5 rtl:-right-12 ltr:-left-12
    }
  }

  salla-progress-bar{
    @apply flex flex-col grow;
  }
}

.s-rating-stars-reviews {
	@apply text-gray-500
}

.s-product-card-promotion-title{
  @apply bg-red-800 text-white;
}

.s-product-card-sale-price {
  h4{
    @apply text-red-800 #{!important};
  }

  span{
    @apply text-inherit;
  }
}

// filters
@media (max-width: 1024px){
  salla-filters{
    &,
    > *{
      @apply px-5 #{!important};
    }
  }
}

// bank offer corner badge
#offer-corner-badge{
  @apply float-left absolute bg-red-600 text-white transform rtl:-rotate-45 ltr:rotate-45 px-12 py-1 h-auto w-auto border-0 m-0 z-1 rtl:top-3 ltr:top-5 rtl:-left-12 ltr:-right-14;
}

// cart options
.cart-options {
  @apply bg-white border-dashed border border-gray-400 rounded-md;
  salla-product-options {
    @apply mb-0 pt-0;
  
    .s-product-options-option {
      @apply block #{!important};

      &-label {
        @apply mb-3;
      }

      .s-form-control {
        @apply rounded-md border-gray-200
      }

      .s-datetime-picker-input {
        @apply rounded-md border-gray-200
      }

      .s-product-options-multiple-options-wrapper {
        @apply block #{!important};
      }
    }
  }
}

salla-quantity-input[max='1']{
  input {
    @apply pointer-events-none opacity-50;
  }

  .s-quantity-input-button {
    @apply cursor-not-allowed
  }
}

.product-details {
    @apply grid grid-cols-1 md:grid-cols-2 gap-8 py-8;

    // القسم الأيسر - معلومات المنتج
    .product-info {
        @apply md:order-2;

        .product-title {
            @apply text-xl md:text-2xl leading-10 font-bold mb-6 text-gray-800;
        }

        .product-tags {
            @apply flex flex-wrap gap-2 mb-6;

            .tag {
                @apply px-3 py-1 bg-gray-100 dark:bg-gray-700 
                       rounded-full text-sm text-gray-600 dark:text-gray-300;
            }
        }

        .product-price {
            @apply flex items-center gap-3 mb-6;

            .sale-price {
                @apply text-2xl font-bold text-primary;
            }

            .regular-price {
                @apply text-lg;
                
                &:not(:only-child) {
                    @apply line-through text-gray-400;
                }
            }
        }
    }

    // القسم الأيمن - معرض الصور
    .product-gallery {
        @apply md:order-1;

        .main-image-container {
            @apply relative rounded-lg overflow-hidden;
            
            // الصورة الرئيسية
            .main-image-wrapper {
                @apply relative aspect-square;

                .main-image {
                    @apply w-full h-full object-cover;
                }

                .promotion-badge {
                    @apply absolute top-4 right-4 z-10
                           px-3 py-1 bg-primary text-white
                           rounded-full text-sm;
                }
            }

            // المصغرات
            .thumbnails-wrapper {
                @apply absolute bottom-4 left-0 right-0
                       px-4 z-20;

                .thumbnails {
                    @apply flex gap-2 justify-center;

                    .thumbnail {
                        @apply w-12 h-12 rounded-md overflow-hidden
                               cursor-pointer
                               ring-1 ring-gray-200 dark:ring-gray-700
                               transition-all duration-200
                               opacity-80 hover:opacity-100;

                        img {
                            @apply w-full h-full object-cover;
                        }

                        &.active {
                            @apply ring-2 ring-primary opacity-100;
                        }
                    }
                }
            }
        }
    }
}

// تحسينات للموبايل
@media (max-width: 768px) {
    .product-details {
        .product-info,
        .product-gallery {
            @apply order-none;
        }
    }
}

// تنسيقات التبويبات
.product-tabs-container {
    @apply mt-8;

    // تنسيق رأس التبويبات
    .tabs-header {
        @apply flex 
               gap-8 
               border-b 
               border-gray-200
               dark:border-gray-700;

        .tab-btn {
            @apply px-6 
                   py-4 
                   text-lg
                   text-gray-500
                   dark:text-gray-400
                   font-medium 
                   relative 
                   transition-all 
                   hover:text-gray-800
                   dark:hover:text-white;

            &.active {
                @apply text-primary
                       dark:text-primary
                       after:absolute 
                       after:bottom-0 
                       after:left-0 
                       after:right-0 
                       after:h-0.5 
                       after:bg-primary;
            }
        }
    }

    // تنسيق محتوى التبويبات
    .tabs-content {
        @apply mt-6;

        .tab-panel {
            @apply text-gray-800
                   dark:text-white;

            // تنسيق تفاصيل المنتج
            .product-description {
                @apply leading-7
                       bg-transparent;
                
                p {
                    @apply mb-4
                           dark:text-white
                           bg-transparent;
                }

                ul, ol {
                    @apply mb-4 
                           list-inside
                           dark:text-white
                           bg-transparent;
                }

                ul {
                    @apply list-disc
                           bg-transparent;
                }

                ol {
                    @apply list-decimal
                           bg-transparent;
                }
            }

            // تنسيق التقييمات
            .reviews-summary {
                @apply flex items-center gap-3 mb-6
                       bg-transparent;

                .rating-count {
                    @apply text-gray-600
                           dark:text-gray-300
                           bg-transparent;
                }
            }
        }
    }
}

// الوضع الداكن
:root[class~="dark"] {
    .product-tabs-container {
        .tabs-header {
            @apply bg-gray-800
                   border-gray-700;

            .tab-btn {
                @apply text-gray-400;

                &:hover {
                    @apply text-gray-200
                           bg-gray-700;
                }

                &.active {
                    @apply text-emerald-400
                           bg-emerald-900/30;

                    &:after {
                        @apply bg-emerald-400;
                    }
                }
            }
        }

        .tabs-content {
            @apply bg-gray-800
                   border-gray-700;
        }
    }
}

// تحسينات للموبايل
@media (max-width: 768px) {
    .product-tabs-container {
        .tabs-header {
            @apply overflow-x-auto
                   flex-nowrap;
            
            .tab-btn {
                @apply whitespace-nowrap
                       flex-none;
                min-width: 33.333%;
            }
        }
    }
}

// تحسينات للموبايل
@media (max-width: 768px) {
    .product-gallery {
        .thumbnails-wrapper {
            .thumbnails {
                @apply overflow-x-auto;
                
                .thumbnail {
                    @apply w-10 h-10 flex-shrink-0;
                }
            }
        }
    }
}

// اختيار الوزن
.weight-selector {
    .weight-options {
        @apply grid grid-cols-3 gap-2;
    }

    .weight-option {
        @apply px-4 py-2 text-sm rounded-lg
               border border-gray-200 dark:border-gray-700
               text-gray-600 dark:text-gray-300
               hover:bg-gray-50 dark:hover:bg-gray-800
               transition-all duration-200;

        &.active {
            @apply border-primary bg-opacity-10 bg-primary
                   text-primary font-medium;
        }
    }
}

// أزرار الإجراءات
.actions-buttons {
    @apply flex flex-wrap items-center gap-2 mb-4;

    .wishlist-btn,
    .share-btn {
        @apply p-3 rounded-lg border border-gray-200 
               dark:border-gray-700 hover:bg-gray-50 
               dark:hover:bg-gray-800;

        i {
            @apply text-xl text-gray-600 dark:text-gray-400;
        }
    }
}

// قائمة المشاركة
.share-menu {
    @apply fixed bottom-0 left-0 right-0 
           bg-white dark:bg-gray-800 
           rounded-t-2xl shadow-lg
           transform translate-y-full
           transition-transform duration-300 ease-in-out
           z-50;

    &.active {
        @apply translate-y-0;
    }

    .share-options {
        @apply grid grid-cols-4 gap-4 p-6;

        .share-option {
            @apply flex flex-col items-center gap-2
                   text-gray-600 dark:text-gray-400
                   hover:text-primary dark:hover:text-primary
                   transition-colors duration-200;

            i {
                @apply text-2xl;
            }

            span {
                @apply text-sm;
            }
        }
    }
}

.product-actions {
    @apply space-y-6;

    // السعر
    .product-price {
        @apply flex items-center gap-3;

        .sale-price {
            @apply text-2xl font-bold text-primary;
        }

        .regular-price {
            @apply text-lg line-through text-gray-400;
        }
    }

    // حقل اختيار الوزن
    .weight-field {
        @apply space-y-2;

        label {
            @apply block text-sm font-medium;
            
            &.required-field:after {
                content: '*';
                @apply text-red-500 mr-1;
            }
        }

        .weight-select {
            select {
                @apply w-full px-4 py-2 rounded-lg
                       border border-gray-200 dark:border-gray-700
                       bg-white dark:bg-gray-800
                       text-gray-900 dark:text-gray-100;
            }
        }
    }

    // حقل الكمية
    .quantity-field {
        @apply space-y-2;

        label {
            @apply block text-sm font-medium;
        }

        .quantity-input {
            @apply flex items-center;

            .quantity-btn {
                @apply w-10 h-10 flex items-center justify-center
                       border border-gray-200 dark:border-gray-700
                       text-gray-600 dark:text-gray-400
                       hover:bg-gray-50 dark:hover:bg-gray-800;

                &.minus {
                    @apply rounded-r-lg rtl:rounded-r-none rtl:rounded-l-lg;
                }

                &.plus {
                    @apply rounded-l-lg rtl:rounded-l-none rtl:rounded-r-lg;
                }
            }

            input {
                @apply w-20 h-10 text-center border-y border-x-0
                       border-gray-200 dark:border-gray-700
                       bg-white dark:bg-gray-800
                       text-gray-900 dark:text-gray-100;
            }
        }
    }

    // أزرار الشراء
    .purchase-buttons {
        @apply grid grid-cols-2 gap-4;

        .buy-now-btn {
            @apply flex items-center justify-center gap-2
                   px-6 py-3 rounded-lg
                   bg-white text-gray-900
                   border border-gray-200
                   hover:bg-gray-50
                   transition-colors duration-200;

            i {
                @apply text-lg;
            }
        }

        .add-to-cart-btn {
            @apply px-6 py-3 rounded-lg
                   bg-primary text-white
                   hover:opacity-90
                   transition-all duration-200;
        }
    }
}

// تحسينات للموبايل
@media (max-width: 768px) {
    .purchase-buttons {
        @apply grid-cols-1;
    }
}

// اختيار الوزن
.weight-section {
    .weight-selector {
        @apply relative;

        .weight-select-btn {
            @apply w-full p-3 
                   bg-white dark:bg-gray-800
                   border border-gray-200 dark:border-gray-700
                   rounded-lg
                   transition duration-150;

            &:hover {
                @apply border-gray-300;
            }

            &.active {
                @apply border-primary;

                i {
                    @apply rotate-180;
                }
            }
        }

        .weight-options-list {
            @apply absolute w-full mt-2 
                   bg-white dark:bg-gray-800 
                   border border-gray-200 dark:border-gray-700
                   rounded-lg shadow-lg 
                   overflow-hidden
                   z-50
                   hidden;

            &.show {
                @apply block;
            }

            .weight-option {
                @apply flex items-center justify-between
                       px-4 py-3
                       cursor-pointer
                       hover:bg-gray-50 dark:hover:bg-gray-700
                       transition duration-150;

                .price {
                    @apply text-primary font-medium;
                }
            }
        }
    }
}

// تنسيقات المنتجات المقترحة
.suggested-products {
    @apply py-8;

    .section-title {
        @apply text-xl
               font-bold
               text-gray-800
               mb-6
               text-center;
    }

    .products-slider {
        @apply px-4;

        :global(.splide__track) {
            @apply overflow-visible;
        }

        .product-entry--minimal {
            @apply bg-white
                   rounded-lg
                   overflow-hidden
                   flex
                   flex-col
                   h-full
                   transition-transform
                   duration-300
                   hover:scale-105
                   border
                   border-gray-100;

            .product-entry__image {
                @apply aspect-square
                       relative
                       overflow-hidden
                       rounded-t-lg;

                img {
                    @apply w-full
                           h-full
                           object-cover;
                }
            }

            .product-entry__content {
                @apply p-4
                       flex
                       flex-col
                       flex-grow;

                .product-entry__title {
                    @apply text-gray-800
                           text-sm
                           font-medium
                           mb-2
                           line-clamp-2;
                }

                .product-entry__price {
                    @apply text-red-500
                           font-bold
                           text-base
                           mt-auto;

                    .before-price {
                        @apply text-gray-400
                               text-sm
                               line-through
                               block;
                    }
                }
            }
        }

        // أزرار التنقل
        .splide__arrow {
            @apply w-10
                   h-10
                   bg-white
                   rounded-full
                   text-gray-600
                   opacity-80
                   hover:opacity-100
                   transition-opacity
                   shadow-md;

            &.splide__arrow--prev {
                @apply -left-5;
            }

            &.splide__arrow--next {
                @apply -right-5;
            }
        }
    }
}

// تحسينات للموبايل
@media (max-width: 640px) {
    .suggested-products {
        .products-slider {
            .splide__arrow {
                @apply hidden;
            }
        }
    }
}

// تنسيقات أزرار التنقل
.breadcrumbs-wrapper {
    @apply w-full 
           py-5 
           bg-gray-50/50
           dark:bg-gray-800/10
           backdrop-blur-sm
           border-b
           border-gray-100
           dark:border-gray-800;

    salla-breadcrumb {
        @apply block;

        // تنسيق القائمة
        ul {
            @apply flex 
                   flex-wrap 
                   items-center 
                   gap-2
                   md:gap-3;
        }

        // تنسيق العناصر
        li {
            @apply flex 
                   items-center 
                   text-sm
                   md:text-base 
                   text-gray-400
                   transition-all
                   duration-300;

            // تنسيق الروابط
            a {
                @apply text-gray-500
                       hover:text-primary 
                       transition-colors
                       dark:text-gray-400
                       dark:hover:text-white
                       hover:scale-105
                       duration-300;

                &:active {
                    @apply scale-95;
                }
            }

            // تنسيق السهم
            i {
                @apply text-xs 
                       mx-2
                       text-gray-300
                       dark:text-gray-600
                       transition-transform
                       duration-300;
            }

            // تنسيق النص النشط
            &:last-child {
                @apply text-gray-800
                       dark:text-white
                       font-medium;
            }

            // تأثير التحويم على العنصر
            &:hover {
                i {
                    @apply transform 
                           rtl:-translate-x-1
                           ltr:translate-x-1;
                }
            }
        }
    }

    // تحسين المظهر في الشاشات الصغيرة
    @screen sm {
        @apply sticky 
               top-0 
               z-40;

        &.is-sticky {
            @apply bg-white/80
                   dark:bg-gray-900/80
                   shadow-sm;
        }
    }
}

// تنسيق صورة المنتج وزر المفضلة
.product-image-wrapper {
    @apply relative;

    // تنسيق زر المفضلة
    .wishlist-btn {
        @apply absolute 
               top-4 
               rtl:left-4
               ltr:right-4
               z-10
               w-10 
               h-10
               rounded-full
               bg-white/80
               dark:bg-gray-900/80
               backdrop-blur-sm
               flex 
               items-center 
               justify-center
               transition-all
               duration-300
               hover:scale-110
               active:scale-95
               shadow-sm
               hover:shadow-md;

        // تنسيق الأيقونة
        i {
            @apply text-lg
                   text-gray-400
                   transition-colors
                   duration-300;

            // عند إضافة المنتج للمفضلة
            &.is-favorite {
                @apply text-red-500
                       scale-110
                       animate-favorite;
            }
        }

        &:hover i {
            @apply text-red-500;
        }
    }
}

// تأثير حركي عند إضافة للمفضلة
@keyframes favorite {
    0% {
        transform: scale(1);
    }
    25% {
        transform: scale(1.2);
    }
    50% {
        transform: scale(0.95);
    }
    100% {
        transform: scale(1.1);
    }
}

.animate-favorite {
    animation: favorite 0.4s ease-in-out;
}

// تحسين مظهر زر المفضلة
.btn--wishlist {
    @apply w-10 
           h-10 
           rounded-full
           shadow-sm
           transition-all
           duration-300
           flex
           items-center
           justify-center
           bg-white/90
           backdrop-blur-sm;

    // تنسيق الأيقونة
    i {
        @apply text-xl
               transition-all
               duration-300
               text-gray-400;

        &.is-favorite {
            @apply text-red-500;
        }
    }

    // تأثير التحويم
    &:hover {
        @apply shadow-md
               bg-white;
        
        i:not(.is-favorite) {
            @apply text-primary;
        }
    }

    // تأثير الضغط
    &:active {
        @apply scale-95
               shadow-sm;
    }

    // الوضع المظلم
    .dark & {
        @apply bg-gray-800/90;

        &:hover {
            @apply bg-gray-800;
        }
    }
}

// تأثير حركي عند إضافة للمفضلة
@keyframes favorite {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.is-favorite {
    animation: favorite 0.3s ease-in-out;
}

// إضافة تأثير نبض للقلب عند التحويم
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.btn--wishlist:hover i:not(.is-favorite) {
    animation: pulse 1s infinite;
}

// تحسين المسافات بين العناصر
.flex {
    &.items-center {
        gap: 1rem;  // المسافة بين العناصر الرئيسية
        
        .space-x-3 {
            gap: 0.75rem;  // المسافة بين أزرار المشاركة والمفضلة
        }
    }
}

// تنسيق التقييم
salla-rating-stars {
    @apply flex items-center;
}